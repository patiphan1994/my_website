<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3DNP | SALES & KEYGEN SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <style>
        /* --- üåë ‡∏•‡πá‡∏≠‡∏Ñ‡∏ò‡∏µ‡∏° Titanium & Apple Minimal --- */
        body { 
            margin: 0; padding: 0; font-family: 'Prompt', sans-serif; min-height: 100vh; 
            background: #000; color: white; display: flex; justify-content: center; align-items: center;
            -webkit-user-select: none; user-select: none; 
        }

        #admin-lock {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        .admin-panel {
            background: rgba(255,255,255,0.03); padding: 40px; border-radius: 30px; 
            width: 100%; max-width: 500px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(20px);
            margin: 40px 0;
        }

        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #666; font-size: 0.85rem; padding-left: 15px; }
        
        input, select {
            width: 100%; padding: 15px; background: #111; border: 1px solid #333; 
            color: white; border-radius: 50px; font-size: 1rem; box-sizing: border-box; outline: none;
            -webkit-user-select: text; user-select: text;
        }

        .btn-titanium {
            width: 100%; padding: 15px; border: none; border-radius: 50px; font-weight: 700;
            background: linear-gradient(to bottom, #7d828c 0%, #2e3338 100%); color: white;
            cursor: pointer; border-top: 1px solid rgba(255,255,255,0.3); box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            transition: 0.3s; margin-top: 10px;
        }

        .btn-workspace {
            background: linear-gradient(to right, #0071e3, #4facfe);
            margin-top: 20px;
        }

        #status-log { margin-top: 20px; font-size: 0.8rem; text-align: center; color: #4facfe; }

        /* üè† ‡∏õ‡∏∏‡πà‡∏° Home */
        .btn-home {
            position: fixed; top: 25px; right: 25px; width: 45px; height: 45px;
            background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; 
            justify-content: center; align-items: center; color: white; text-decoration: none;
        }
    </style>
</head>
<body>

    <div id="admin-lock">
        <div style="font-size: 3rem; color: #4facfe; margin-bottom: 20px;"><i class="fas fa-user-shield"></i></div>
        <h2 style="margin-bottom: 30px;">Admin Authorization</h2>
        <input type="password" id="masterPassword" placeholder="Enter Secret Password" style="width: 300px; text-align: center; margin-bottom: 20px;">
        <button class="btn-titanium" onclick="unlockAdmin()" style="width: 300px;">UNLOCK SYSTEM</button>
    </div>

    <a href="login.html" class="btn-home"><i class="fas fa-home"></i></a>

    <div class="admin-panel">
        <div style="font-size: 1.8rem; font-weight: 700; text-align: center; margin-bottom: 30px;">3DNP <span>SALES TOOL</span></div>
        
        <div class="input-group">
            <label>CUSTOMER EMAIL</label>
            <input type="email" id="custEmail" placeholder="customer@email.com">
        </div>

        <div class="input-group">
            <label>LICENSE PLAN</label>
            <select id="keyType">
                <option value="MONTHLY">Monthly Plan (‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</option>
                <option value="YEARLY">Yearly Plan (‡∏£‡∏≤‡∏¢‡∏õ‡∏µ)</option>
                <option value="VIP">Lifetime VIP (‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏û)</option>
            </select>
        </div>

        <button class="btn-titanium" onclick="processSale()">‚ö° GEN KEY & SEND RECEIPT</button>
        
        <button class="btn-titanium btn-workspace" onclick="window.location.href='system.html'">
            <i class="fas fa-desktop"></i> GO TO WORKSPACE
        </button>

        <div id="status-log"></div>
    </div>

    <script>
        // 1. ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
        function unlockAdmin() {
            const pass = document.getElementById('masterPassword').value;
            if(pass === "admin1234") { // ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏û‡∏µ‡πà
                document.getElementById('admin-lock').style.display = 'none';
            } else { alert("‚ùå Access Denied!"); }
        }

        // 2. ‡∏£‡∏∞‡∏ö‡∏ö Gen Key + ‡∏™‡πà‡∏á‡πÄ‡∏°‡∏• + ‡∏ó‡∏≥‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        async function processSale() {
            const email = document.getElementById('custEmail').value;
            const plan = document.getElementById('keyType').value;
            const log = document.getElementById('status-log');

            if(!email) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö"); return; }

            // ‡∏™‡∏∏‡πà‡∏° Key
            const random = Math.random().toString(36).substring(2, 10).toUpperCase();
            const generatedKey = `3DNP-${plan}-${random}`;

            log.innerText = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à...";

            // ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (Receipt Data)
            const receiptID = "REC-" + Date.now().toString().slice(-6);
            const price = plan === "MONTHLY" ? "590 THB" : (plan === "YEARLY" ? "5,900 THB" : "15,000 THB");

            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏°‡∏• (EmailJS) ---
            // ‡∏•‡∏π‡∏Å‡∏û‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏≤ Public Key, Service ID, Template ID ‡∏à‡∏≤‡∏Å EmailJS ‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö
            // emailjs.init("YOUR_PUBLIC_KEY");
            // emailjs.send("SERVICE_ID", "TEMPLATE_ID", {
            //     to_email: email,
            //     key: generatedKey,
            //     plan: plan,
            //     receipt_id: receiptID,
            //     price: price,
            //     date: new Date().toLocaleDateString()
            // }).then(...)

            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Key ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏û‡∏µ‡πà)
            setTimeout(() => {
                log.innerHTML = `‚úÖ ‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!<br><b>Key:</b> ${generatedKey}<br><b>Receipt:</b> ${receiptID}`;
                alert(`SUCCESS!\n‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå: ${generatedKey}\n‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏õ‡∏ó‡∏µ‡πà: ${email} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
            }, 1500);
        }
    </script>
</body>
</html>
